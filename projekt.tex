\documentclass[11pt,a4paper]{article}
\setlength{\headheight}{34pt}
\renewcommand{\baselinestretch}{1.3}\normalsize
\usepackage[margin=1.2in]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[german]{babel}
\usepackage[printonlyused]{acronym}
\usepackage[
	colorlinks=false,
	urlcolor=blue,
	linkcolor= gray
]{hyperref}
\usepackage{lmodern,textcomp}
\usepackage{graphicx}
\usepackage{appendix}
\usepackage{pdfpages}
\usepackage{listings}
\graphicspath{ {images/} }
\usepackage{amsmath}
\usepackage{svg}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\rhead{\includegraphics[scale=0.05]{logo_zmb}}
\lhead{\textbf{Agentur Website}\\Ein Full Stack Webdevelopement Projekt}
\rfoot{Seite \thepage}
\author{Jeremy Seipelt}
\title{IHK Abschluss-Projekt 2017}
\begin{document}
\clearpage\maketitle
\thispagestyle{empty}
	\begin{center}
		\begin{Large}
		
			
			Für den Beruf des Fachinformatiker der Anwendungsentwicklung\\
			
		\end{Large}
	\end{center}
 
 	\begin{center}
		\begin{LARGE}
			 \textbf{Agentur Website}\\			 
		 Ein Full-Stack Web-Developer Projekt
		\end{LARGE}
	\end{center}
	
	\begin{center}
	Auszubbildner: \\ 
 	Jeremy Seipelt\\
 	Pichelsdorferstr. 72\\
	 13595 Berlin\\
	\end{center}	
	
	\begin{center}
		\includegraphics[scale=0.05]{logo_zmb}\\
 		Ausbildungsbetrieb:\\
 		zmb GmbH\\
 		Scharnhorstr. 112\\
 		11234 Berlin \\
 	\end{center}
\newpage
\tableofcontents
\newpage
\begin{acronym}[Full Stack]
 \acro{SSR}{Server Sided Rendering}
 \acro{SPA}{Single Page Application}
 \acro{DOM}{Document Object Model}
\end{acronym}
\begin{acronym}[Allgemein]
 \acro{B2B}{Business to Business}
 \acro{KMU}{Kleines Mittelständisches Unternehmen}
\end{acronym}
\newpage
\setcounter{page}{1}
\section{Vorwort}
Diese Projektdokumentation ist für die Abschlussprüfung der IHK für den Beruf des Fachinformatikers der Anwendungsentwicklung entstanden und beschreibt Vorgehensweisen des Verfassers.\\
Ausbildungsbetrieb ist die zmb GmbH, ein KMU mit Standort in Berlin Mitte.
Die zmb vertreibt ihre eigen E-Commerce Plattform, genannt CORE, und geht Projektarbeiten im \acs{B2B} Bereich für alle gängigen Shopsysteme nach.  
Dabei legt die zmb Wert darauf alle Wünsche des Kunden, von der Bereitstellung eigener API über Onboarding bis hin zu Zahlungsweisen, zu erfüllen. 
\subsection{Beschreibung des Projektes}
Für die neu geplanten Agenturarbeiten der zmb, soll eine neue Internet-Präsenz aufgebaut werden.\\\\
Die zmb wird zurzeit nur durch eine Website aus Seiten, die durch das interne CMS System gepflegt werden, präsentiert, sowie auf Partnerseiten.\\\\
Die neue Seite wird eine \acs{SPA} um die Seite für den Kunden modern und schnell zu machen.  
Der Server muss dafür die \acs{SPA} bereits kompiliert versenden, da Suchmaschinen sich nur die gesendete HTML Datei ansehen, dafür benötigen wird ein \acs{SSR}-Setup auf dem Server.
Dafür wird im Verlauf des Projekts ein Server gemietet sowie aufgesetzt. Und eine Website erstellt auf der potentielle Kunden mit der zmb in Kontakt treten können.  
\subsection{Ziel des Projektes}
Am Ende des Projekts soll eine \acs{SPA} entstehen die mithilfe von \acs{SSR} auch ein Vernünftiges SEO Ranking hinbekommt. Dabei sollen namenhafte Geschwindigkeitsindexe die Seite mit maximalen Punkten bewerten.
Die Inhalte der \acs{SPA} werden über ein selbst auf dem Server installiertes CMS-System eingetragen.
Am Ende entsteht somit eine Website die auch ohne Hilfe von HTML sowie JS und CSS gepflegt werden kann.
\subsection{Umfeld des Projektes}
Das Projekt wurde vom COO Simeon Gerodetti beantragt.\\
Herr Gerodetti ist in der zmb für das operative Geschäft sowie für das Marketing, den Online-Auftritt der zmb zuständig.
Des weiteren kümmert er sich um die Partner im \acs{B2B} Bereich und sorgt für Kundenaufträge und das Rechnungswesen des Unternehmens.\\\\
Jovan Gerodetti ist der Softwareentwickler für Frontend sowie der Spezialist in Angular. Er baut neue UIs sowie Schnittstellen für CORE und stellt eine Beratende Funktion für das Projekt dar.\\\\
Für das Projekt ist S. Gerodetti für Entscheidungen im Design und J. Gerodetti bei Fragen zur Implementierung zuständig.\\
Die Abnahme des Projektes wird von S. Gerodetti vollzogen.
\subsection{Projektentscheidung}
Das Hauptgeschäft besteht aus dem Verkauf und der Entwicklung der Inhouse E-Commerce Lösung 'CORE', welche von 3 Personen gewartet wird. 'Core' wird bisher nur als SaaS Lösung eingesetzt und deshalb liegt der administrative Aufwand bei der zmb. Deswegen wird geplant von der eigenen Lösung wegzugehen und den Kunden, für bereits vorhandene Shopsysteme, Lösungen anzubieten.\\\\
Den ersten Schritt in die Richtung der Agenturarbeit geht die zmb mit der zmb.agency Website, dessen Unterbau durch dieses Projekt entsteht.
\subsection{Beschränkungen des Projektes}
Das Projekt beschränkt sich auf das Aufsetzen sowie implementieren einer kleineren Version der Agentur Website die schon alle technischen Voraussetzungen und ein Bruchteil des Inhaltes enthält. Deswegen wird der Großteil der Layout und CSS Arbeiten die im größeren Umfang ein Teil sind, sowie das Anlegen von Inhalten für die Seite, nicht in die Projektzeit eingerechnet.\\
Probleme die zur Verzögerung des ganzen Projekts geführt hätten wurden aus der Projektplanung ausgenommen. (Ausführen)
\section{Projekt-Planung}
Das Projekt wurde auf 70h für die Anforderungen der IHK angesetzt. 
\subsection{Projektverlauf}
Ein Übersicht der Hauptphasen sind der Tabelle 1 zu entnehmen. Eine detaillierte Ansicht der Zeitplanung ist in der \ref{sec:teilaufg} auf Seite \pageref{sec:teilaufg} hinterlegt.\\
\begin{table}[!ht]
  \centering
     \begin{tabular}{l|r}
       \textbf{Phase}  & \textbf{Dauer in Stunden} \\
       \hline
      Analyse       & 8                     \\
      Entwurf       & 7             	    \\
      Implementierung       & 23	\\
      Testen       & 13			         \\
       Dokumentation      &  8        \\
       \\
       \hline
       \hline
       Gesammt        & 64               \\
     \end{tabular}
     \caption{Übersicht der Zeitplanung}
\label{tbl:Übersicht der Zeitplanung}
\end{table} 
\subsection{Ressourcenplanung}
Bei der Auswahl der Ressourcen wurde Wert auf Open Source Lösungen wert gelegt, um Projektkosten möglichst gering zu halten. Die Liste aller Benutzter Software ist unter %Todo
zu finden.
\subsection{Entwicklungsprozess}
Die Entwicklung der Website wird per Wasserfall-Modell abgewickelt. Dabei werden die einzelnen Phasen des Projektverlaufs nacheinander durchlaufen. Nach jeder Phaase wird mit S. Gerodetti Rücksprache über den Stand der Dinge gehalten , J. Gerodetti übernimmt dessen Rolle in der Implementierung.\\
Das Wasserfall-Modell bietet sich für kleine Software-Projekte, die einen klaren Endzustand haben, an. Da die Anforderungen schon niedergeschrieben sind, können diese in der Entwurfsphase mit einbezogen werden. \\\\
Eine Agile Entwicklung ist somit nicht Sinnvoll, und würde nur den Aufwand erhöhen.
\section{Analysephase}
\subsection{Ist-Analyse}
Die zmb ist nur als Firma für den Vertrieb und Wartung von Shop Systemen bekannt , allen voran ihr eigenes 'CORE'. Die Seite informiert nicht über die Agenturarbeit die die zmb anbietet. 
Zu Beginn des Projektes steht nur ein gemieteter AWS Server zur Verfügung der eine minimale   Version der Linux Distribution Ubuntu als Betriebssystem benutzt. 
\subsection{Wirtschaftlichkeit}
Aufgrund des Umstieges auf Agenturarbeit, muss auch eben diese  im Internet beworben werden. Momentan kommen Auftrage nur aus dem Partnernetzwerk und nicht auf dem direkten Weg zur zmb, deswegen ist die neue Internetpräsenz zwangsweise erforderlich.
\subsubsection{Kosten}
Die Ressourcenplanung besteht aus Personal und Sachkosten.\\\\
Für das Projekt werden 3h für Beratung durch einen Senior Developer eingerechnet.\\\\
Für die Entwicklung wird auf Open Source Lösungen gesetzt. Eine genau Liste der Verwendeten Software auf dem Server wird in Tabelle %TODO aufgelistet
\begin{table}[!ht]
  \centering
     \begin{tabular}{l|r||l|r}
       \textbf{Personalkosten}  & &\textbf{Sachkosten}& \\
       \hline
       Entwickler      &    70*10€ = 700€    &  AWS Lightsail Server      &     5€/mtl\\
       COO    &  2*30€ = 60€               	    &  Domain & 20€/jahr\\
       Beratung durch Seniorentwickler    &  3*30€ = 90€ & Software Lizenzen & 0€	\\ 
       \hline
       \hline
       Gesammt Fix& 850€ & Gesammt Monatlich & \textasciitilde 7€  \\
     \end{tabular}
\caption{Kostenplanung}
\label{tbl:Kostenplanung}
\end{table}
\subsubsection{Amortisation}
Die Seite amortisiert sich durch die Anzahl an Stunden Agenturarbeit die durch sie vergeben wurde.
Zur Berechnung der Stunden werden die Kosten aus der Ressourcenplanung genommen. Für Agenturarbeit wird eine  Pauschale von 100 €/h genommen.\\
\begin{equation*}
x = 850 / 100 = 8.5
\end{equation*}
Somit Rechnet sich die Seite bereits nach 9h Agenturarbeit. Das entspricht 9 Kunden im Worst-Case-Szenario die durch die Seite Agenturarbeit buchen.
\subsection{Anforderungen}
Angefordert wurde eine neue Website.\\\\
Diese Websie muss höchste Punktzahl in verschiedenen Tempo Benchmarks bringen, um den Besuche zu zeigen das die zmb modernste Technologien beherrscht.\\\\
Dabei soll dem Besucher \acs{SPA} entstehen damit der Benutzer wenn er auf der Seite navigiert nicht den \acs{DOM} bei jedem Request neu berechnen muss. 
Zur Erstellung der SPA soll Angular verwendet werden, da es sich hierbei um eine bereits im Unternehmen etabliertes Framework handelt.\\\\
Damit Crawler etc unsere Seite vernünftig indexieren können muss die Seite bereits auf dem Server vorgerechnet werden um einen fertigen \acs{DOM} an den Crawler zu senden.
Der Prototyp soll dem Mockup von S. Gerodetti ähneln, das Mockup ist auf Seite \pageref{tbl:Übersicht der Zeitplanung} einzusehen.\\Für den Anfang wird nur das Hero Image, sowie das Kontaktformular auf der Landingpage benötigt. 
\subsubsection{SSR PoC}
Zur Analyse gehörte auch der Beweis das der SSR Prozess funktioniert. Die von Angular bereitgestellte Projekt Repo\footnote{https://github.com/angular/universal-starter} konnte
\section{Entwurfsphase}
Die Anforderungen verlangen eine Website, dadurch ist die Wahl der Zielplattform der Webbrowser\footnote{Alle Webbrowser ab IE9}. Dabei verwenden wir soviel es geht TypeScript\footnote{https://www.typescriptlang.org/}, da es sich hierbei um eine in der Firma etablierte Sprache handelt. TypeScript wird deswegen sowohl auf Client als auch Server Ebene verwendet. 
\subsection{Server}
Der Entwurf der Server Komponenten sind auf Seite x referenziert. Der Server ist ein, von Amazon gebuchter, Lightsail\footnote{•} Server der über ein Linux OS mit Ubuntu als Distribution verfügt.
\subsubsection{CMS}
Geplant ist ein CMS System auf dem Server (Drupal) mit Datenbank(MYSQL). Dabei soll für jede Komponente der Website, die auf Seite %TODO 
referenziert werden, ein Inhaltstyp erstellt werden.\\
Die Inhalte sollen über ein REST-Modul in Drupal dann per REST API für die SPA erreichbar sein.
Geplant sind vorerst folgende Rest Schnittstellen:
\begin{table}[!ht]
  \centering
     \begin{tabular}{l|c}
       \textbf{Schnittstelle}  & \textbf{Endpunkt} \\
       \hline
       Inhalte einer bestimmten Seite & \textbf{export/pages/SEITENNAME} \\
       Inhalte aller Seiten & \textbf{export/pages/all} \\
       Inhalte einer bestimmten Sektion & \textbf{/export/paragraphs/ID} \\
       Inhalte aller Sektionen & \textbf{export/paragraphs/all}\\
       Inhalte der Kopfzeile & \textbf{export/headbar}\\
     \end{tabular}
\caption{REST-API}
\end{table}
\subsubsection{HTTP/HTTPS}
Der Server soll über HTTP/HTTPS erreichbar sein. Der Server muss unterscheiden, ob der Benutzer die Agentur SPA anfragt oder das CMS System. In Anbetracht der weiteren Entwicklung wurde eine zweite Instanz der Webseite erstellt, um Produktions Website von der Entwicklung Website zu trennen. Deswegen werden auf dem Server folgende Routen eingestellt:
\begin{table}[!ht]
  \centering
     \begin{tabular}{l|c}
       \textbf{Anwendung}  & \textbf{Route} \\
       \hline
       Drupal & \textbf{/drupal}\\
       SPA/Agentur Website & \textbf{/}\\
       SPA/Entwicklung & \textbf{/dev}\\ 
     \end{tabular}
\caption{Routen}
\end{table}
\subsubsection{Node}
Um Javascript auf einem Server ausführen zu können, muss ein Node Server vorhanden sein.
Der Node Server muss jede auf ihm zeigende Route abfangen und die zugehörige Route der SPA bereitstellen. Hier findet der eigentliche SSR Prozess statt, dafür muss dem Node Server die ganze SPA bereitgestellt werden. Dafür wird das Express Framework verwendet welches HTTP anfragen an den Node Server verarbeitet. Mit
\subsection{Single Page Application}
Das Framework welches für die SPA verwendet wird ist Angular\footnote{https://angular.io}, welches die zmb seit Jahren produktiv einsetzt. Bei Angular wird der Fokus auf wiederverwendbare Komponenten gesetzt die, wie native DOM-Element, in das HTML eingebunden werden.\\\\
Bei der SPA muss dem Layout aus den Anforderungen, auf Seite %TODO
, entsprechen. Dafür wurde der generelle Seiten-Aufbau in der Grafik  ,auf Seite %TODO 
festgelegt. Deswegen werden Komponenten entworfen, die für einzelne Passage der Website stehen. 
Um die Rest-API vom CMS  konsumieren zu können, benötigen wir noch ein Service\footnote{https://angular.io/guide/dependency-injection}.
Der Entwurfsplan der SPA ist auf der Seite %TODO
hinterlegt.
\section{Implementierungsphase}
\subsection{Server}
\subsubsection{Aufsetzen des Servers}
Der gebuchte Lightsail Server wird nur mit einer minimalen Installation ausgeliefert. Als erstes werden die benötigten Programme installiert. Dabei werden die unter Server aufgeführten Programme über den Ubuntu Package Manager "apt" installiert. Für die einfache Arbeit mit dem Server wurden symbolische Links, auf wichtige Serverressourcen und Programme, in das Home Verzeichnis des Users angelegt, wie auf dem Sreenshot auf Seite %TODO .
\subsubsection{NGINX}
Der HTTPS Teil des Servers wird von NGINX gesteuert. Nach der Installation des NGINX, muss der NGINX Service gestartet werden. Sobald der NGINX läuft kann der Server konfiguriert werden. Da Drupal und Node auf dem selben Server liegen müssen für beide unterschiedliche Routen in der Konfiguration angelegt werden wie auf Seite \pageref{sec:nginx}.
\subsubsection{CMS}
Drupal ist das einzige Programm welches nicht über Package Manager installiert wurde.
\subsubsection{Node}
Neben Node wurde noch PM2\footnote{http://pm2.keymetrics.io/} installiert um den Node Prozess bei Abstürzen automatisch neu zu starten. Das Programm 
\subsection{SPA}
\section{Abschlussphase}
\section{Dokumentation}
Die Dokumentation besteht aus zwei Teilen einer Projektdokumentation und einer Entwickler Dokumentation.
\subsection{Projektdokumentation}
Die Projektdokumentation besteht aus einer genauen Beschreibung der für die Ausführung des Projektes benötigten Phasen, sowie Information zur in der Phase benutzten Technologie.
Die Dokumentation wird mit \LaTeX geschrieben um ein einheitliches Layout zu gewähren.
\subsection{Entwickerdokumentation}
Die Entwicklerdokumentation besteht aus einer automatisch generierten Doku unter Verwendung von Compodoc\footnote{https://compodoc.github.io/compodoc/}, welcher alle Informationen aus dem Sourcecode bezieht und diese für Entwickler aufbereitet. Diese Dokumentation ist aus dem Sourcecode für alle Entwickler kompilierbar. Screenshot im Anhang \ref{sec:doku} auf Seite \pageref{sec:doku}.
\section{Endstand}
Das Projekt wurde mit einer funktionstüchtigen Website abgeschlossen. 
\subsection{Ist/Soll-Zustand}
Der Ist-Zustand wird in den folgenden Abschnitten mit den Anforderungen(Soll-Zustand) verglichen.
\subsubsection{Geschwindigkeit}
Die Website schneidet mit höchsten Punktzahlen bei den Ausgewählten Benchmarks ab.
Die Berichte für Pingdom sowie PageSpeed Insight sind auf Seite  \pageref{sec:google}/\pageref{sec:pingdom}. Die Google Audits für Performance konnten nicht im Zeitrahmen des Projekts nicht in den grünen Bereich gebracht werden. Übersicht des Audits ist auf Seite %TODO
zu sehen.
\subsubsection{Layout}
Das fertige Layout ist auf 3 verschiedenen Endgeräten auf Seite  %TODO
zu sehen. Die Navigation in der Kopfzeile fehlt, da es noch keine Navigation auf der Seite gibt.
Problematisch ist die weiße Überschrift, welche wenn sie die Erde berührt nur schwer zu Lesen ist.
\subsubsection{SPA}
Die geschriebene SPA ist in der Lage die Seite in gewünschter Form anzuzeigen. Die Screenshots aus dem Layout Teil sind direkt in der SPA enstanden. 
\subsubsection{SSR}
Die Seite wird, wie auf den Screenshots auf Seite X und Y gezeigt, bereits auf dem Server gerendert.
\subsubsection{CMS}
Das \acs{CMS} Drupal ist auf dem Server installiert und ist über eine eigene URL auf der Domain der Agenturseite freigeschaltet. Inhalte werden bereits für die Seite erstellt und gepflegt, wie auf Seite %TODO 
zu sehen ist. 
\subsection{Quo Vadis ?}
Nach Abschluss ist noch eine Menge für die Seite zu tun.
Das CMS  ist zwar vorhanden besitzt aber kaum Einträge oder Übersetzungen in andere Sprachen.
Somit muss noch ein Übersetzung Service in Angular gebaut und Inhalte erstellt werden. Das Bootstraping der SPA verwirft den DOM zurzeit, deswegen ist der Einbau des "Preboot" Moduls grade an oberster Priorität. Geplant ist auch das verwenden von Service Workers\footnote{https://developers.google.com/web/fundamentals/primers/service-workers/} wie Google Amp\footnote{https://www.ampproject.org/}. 
\subsection{Fazit für zukünftige Projekte}
\begin{appendices}
\includepdf[scale=0.7,pages=1,pagecommand=\section{Abbildungen}\subsection{Tabellen}\subsubsection{Detaillierte Übersicht der Aufgaben}\label{sec:teilaufg}]{Teilaufgaben}
\subsection{Grafiken}
\subsubsection{Aufbau der Seite}
\includegraphics[scale=0.5,height=10cm]{Seite}
\subsubsection{Projekt Architektur}
\includegraphics[scale=0.5,height=10cm]{Entwurf}
\subsubsection{SSR Node Entwurf}
\includegraphics[scale=1]{SSR}
\subsubsection{SPA Entwurf}
\includegraphics[scale=0.7]{SSA}
\subsubsection{Website Mockup}
\includegraphics[draft,scale=0.1,height=20cm]{Vorlage}
\includepdf[scale=0.8,pages=1,pagecommand=\subsubsection{PageSpeed Insights}\label{sec:google}]{pagespeed}
\includepdf[scale=0.8,pages=1-2,pagecommand=\subsubsection{Pingdom}\label{sec:pingdom}]{pingdom}
\subsection{Screenshots}
\subsubsection{Alte Website}
\includegraphics[scale=0.3]{getcore}
\subsubsection{Entwickler Dokumentation}
\label{sec:doku}
\includegraphics[scale=0.3]{compodoc}
\subsubsection{Responsive Design}
\label{sec:responsive}
\includegraphics[scale=0.3]{responsive}
\section{Code Beispiele}
\subsection{NGINX Konfiguration Auszug}
\label{sec:nginx}
\begin{lstlisting}
location  / {
        proxy_pass http://localhost:1337/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
    
location /drupal/ {
        index index.php;
        root /data/www/drupal;
    }
\end{lstlisting}
\end{appendices}
\end{document}
